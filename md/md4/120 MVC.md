。

# MVC

* 设计模式是个框，什么都能往里装



## 设计模式是啥？

* 老子这个代码写得太漂亮了，别人肯定也用得到
* 那就给这种写法取个名字吧，比如适配器模式
* 设计模式就是给通用代码取个名字而已



## 为什么要有设计模式？

* Don't Repeat Yourself -DRY原则



## 哪里重复了？

### 代码级别的重复

* 你把相同的三行代码写了两遍
* 那么你就应该重构它

### 页面级别

* 你把类似的页面做了10遍
* 那么你就应该想出一个万金油写法

### MVC就是一个万金油

* 所有的页面都可以使用MVC来优化代码结构



## 我不学MVC又怎样？

### 意大利面条式代码

* 老手程序员为了鄙视烂代码，将其称为面条式代码

### 你将变成外包式程序员

* 不停重复自己，不懂得抽象
* 只会调用API，不能提升自己
* 只会写业务，不会封装，不会造轮子，更不会加薪



## 我学还不行么？

### MVC是啥？

* 每个模块都可以写成三个对象，分别是M、V、C
* M-Model（数据模型）负责操作所有数据
* V-View（视图）负责所有UI界面
* C-Controller（控制器）负责其他

### 就这？

* 是的，意会
* MVC 没有严格的定义
* M、V、C 分别要做什么也是很随意的，大概对就行



## 抽象思维1

### 最小知识原则

* 引入一个模块需要引入 html、css、js
* 引入一个模块需要引入 html、js
* 引入一个模块需要引入 js
* 你需要知道的知识越少越好
* 模块化为这一点奠定了基础

### 代价

* 这样做会使得页面一开始是空白的，没内容没样式
* 解决方法很多，比如加菊花、加骨架、加占位内容等
* 也可以选择用 SSR 技术来解决，不过太复杂



## 抽象思维2

### 以不变应万变

* 既然每个模块都可以用 **m + v + c** 搞定
* 那么每个模块我就都这样写就好啦
* 不用再思考类似的需求该怎么做了

### 代价

* 有时候会有一些多余的用不到的代码
* 有时候遇到特殊情况不知道怎么变通，比如没有 html 的模块怎么做 mvc



## 抽象思维3

### 表驱动编程

* 当你看到大批类似但不重复的代码
* 眯起眼睛，看看到底哪些才是重要的数据
* 把重要的数据做成哈希表，你的代码就简单了



## 抽象思维4

### 事不过三

* 同样的代码写三遍，就应该抽成一个函数
* 同样的属性写三遍，就应该做成共用属性（原型或类）
* 同样的原型写三遍，就应该用继承

### 代价

* 有的时候会造成继承层级太深，无法一下看懂代码
* 可以通过写文档、画类图解决



## 抽象思维5

### 俯瞰全局

* 把所有的对象看成点
* 一个点和一个点怎么通信
* 一个点和多个点怎么通信
* 多个点和多个点怎么通信
* 最终我们找出一个专用的点负责通信
* 这个点就是 event bus （事件总线）



## 抽象思维6

### view = render(data)

* 比起操作 DOM 对象，直接 render 简单多了
* 只要改变 data ，就可以得到对应的 view

### 代价

* render 粗狂的渲染肯定比 DOM 操作浪费性能
* 还好可以使用虚拟 DOM
* 虚拟 DOM 能让 render 只更新该更新的地方



相关资料：

[1] [深入理解MVC](https://zhuanlan.zhihu.com/p/35680070)















