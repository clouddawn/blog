# 在大型项目中单例 store 有哪些问题？

## 问题

### 状态臃肿

* 所有数据都堆在一个全局 store 里，模块间边界模糊，状态管理混乱。
* 随着业务增长，store 文件会变得巨大，难以维护。

### 耦合度高

* 各个模块共用同一个 store，容易产生跨模块依赖。
* 修改某个状态逻辑，可能影响到其他功能。

### 调试和定位困难

* 状态更新路径复杂，不容易追踪某个状态是在哪个地方被改动的。

### 性能问题

* 所有组件都依赖同一个大 store，任何局部更新可能导致大范围组件重新渲染。

### 扩展性差

* 新增功能时，要在单例 store 中继续增加字段，缺乏清晰的模块划分，长期维护成本高。

## 解决思路

### 模块化管理

* 将单例 store 拆分成多个模块（如 Vuex 的 `modules`， Pinia 的多 `store`）。
* 每个模块只负责一个领域（如用户、订单、购物车），互相独立，降低耦合。

### 局部状态优先

* 并非所有状态都要进全局 store。
* 页面或组件内部数据，用 `ref` / `reactive` 管理即可。

### 明确数据流与接口

* 在 store 中使用 getter / action 作为访问入口，而不是让组件直接改数据。
* 这样可以保证数据更新路径清晰，便于调试和维护。

### 按需加载

* 在大型应用中，可以用动态注册的方式，按需引入模块（例如 Vuex 的 `rigisterModule`、Pinia 的懒加载 store）。
* 避免一次性加载这个大 store，优化性能。

### 持久化与同步机制

* 需要跨页面、跨会话的状态（比如登录态、购物车），使用持久化插件。
* 多标签页同步可以用 `storage` 事件或 `BroadcastChannel`。































