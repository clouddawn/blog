# canvas

`<canvas>`是一个可以使用 `JavaScript` 来绘制图形的 ` HTML ` 元素。例如，它可以用于绘制图表、制作图片构图或者制作简单的动画。

## 基本用法

```html
<canvas id="tutorial" width="150" height="150"></canvas>
```

`<canvas>` 标签只有两个属性**——** `width`和`height`。当没有设置宽度和高度的时候，`canvas` 会初始化宽度为 300 像素和高度为 150 像素。该元素可以使用`CSS`来定义大小，但在绘制时图像会伸缩以适应它的框架尺寸：**如果 `CSS` 的尺寸与初始画布的比例不一致，它会出现扭曲。**

### 渲染上下文

`<canvas>` 元素创造了一个固定大小的画布，它公开了一个或多个渲染上下文，其可以用来绘制和处理要展示的内容。

canvas 起初是空白的。为了展示，首先脚本需要找到渲染上下文，然后在它的上面绘制。`<canvas>` 元素有一个叫做 `getContext()` 的方法，这个方法是用来获得渲染上下文和它的绘画功能。`getContext()` 接受一个参数，即上下文的类型。

```js
const canvas = document.getElementById("tutorial");
const ctx = canvas.getContext("2d");
```

## 绘制图形

### 栅格

![](../images8/283/01.png)

`canvas` 元素默认被网格所覆盖。通常来说网格中的一个单元相当于 `canvas` 元素中的一像素。栅格的起点为左上角（坐标为`（0,0）`）。所有元素的位置都相对于原点定位。所以图中蓝色方形左上角的坐标为距离左边（X 轴）x 像素，距离上边（Y 轴）y 像素（坐标为（x,y））。

### 绘制矩形

`<canvas>` 只支持两种形式的图形绘制：矩形和路径（由一系列点连成的线段）。所有其他类型的图形都是通过一条或者多条路径组合而成的。

canvas 提供了三种方法绘制矩形：

`fillRect(x, y, width, height)`

* 绘制一个填充的矩形

`strokeRect(x, y, width, height)`

* 绘制一个矩形的边框

`clearRect(x, y, width, height)`

* 清除指定矩形区域，让清除部分完全透明

上面提供的方法之中每一个都包含了相同的参数。x 与 y 指定了在 `canvas` 画布上所绘制的矩形的左上角（相对于原点）的坐标。`width` 和 `height` 设置矩形的尺寸。

### 绘制路径

图形的基本元素是路径。路径是通过不同颜色和宽度的线段或曲线相连形成的不同形状的点的集合。一个路径，甚至一个子路径，都是闭合的。使用路径绘制图形需要一些额外的步骤。

* 首先，你需要创建路径起始点。
* 然后你使用画图命令去画出路径。
* 之后你把路径封闭。
* 一旦路径生成，你就能通过描边或填充路径区域来渲染图形。

`beginPath()`

* 新建一条路径，生成之后，图形绘制命令被指向到路径上生成路径。

`closePath()`

* 闭合路径之后图形绘制命令又重新指向到上下文中。

`stroke()`

* 通过线条来绘制图形轮廓。

`fill()`

* 通过填充路径的内容区域生成实心的图形。

生成路径的第一步叫做 `beginPath()`。本质上，路径是由很多子路径构成，这些子路径都是在一个列表中，所有的子路径（线、弧形、等等）构成图形。而每次这个方法调用之后，列表清空重置，然后我们就可以重新绘制新的图形。

第二步就是调用函数指定绘制路径.

第三，就是闭合路径 `closePath()` ,不是必需的。这个方法会通过绘制一条从当前点到开始点的直线来闭合图形。如果图形是已经闭合了的，即当前点为开始点，该函数什么也不做。

### 移动笔触

`moveTo(x, y)`

* 将笔触移动到指定的坐标 x 以及 y 上。

当 canvas 初始化或者`beginPath()`调用后，你通常会使用`moveTo()`函数设置起点。我们也能够使用`moveTo()`绘制一些不连续的路径。

### 绘制直线

`lineTo(x, y)`

* 绘制一条从当前位置到指定 x 以及 y 位置的直线。   

该方法有两个参数：x 以及 y，代表坐标系中直线结束的点。开始点和之前的绘制路径有关，之前路径的结束点就是接下来的开始点，以此类推。开始点也可以通过 `moveTo()` 函数改变。

### 绘制圆弧

绘制圆弧或者圆，我们使用 `arc()` 方法。

`arc(x, y, radius, startAngle, endAngle, anticlockwise)`  

* 画一个以`（x,y）`为圆心的以 `radius` 为半径的圆弧（圆），从 `startAngle` 开始到 `endAngle` 结束，按照 `anticlockwise` 给定的方向（默认为顺时针）来生成。  
* `x,y` 为绘制圆弧所在圆上的圆心坐标。
* `radius` 为半径。
* `startAngle` 以及 `endAngle` 参数用弧度定义了开始以及结束的弧度。这些都是以 x 轴为基准。参数 `anticlockwise` 为一个布尔值。为` true `时，是逆时针方向，否则顺时针方向。
  *  `arc() `函数中表示角的单位是弧度，不是角度。角度与弧度的 `js `表达式： `弧度=(Math.PI/180)*角度`。  
