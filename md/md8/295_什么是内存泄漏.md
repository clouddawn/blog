# 什么是内存泄漏？

内存泄漏指的是，程序在运行过程中，本来不再使用的内存，却因为某些原因没有被释放，导致这部分内存一直占用，无法被垃圾回收（GC），最终可能造成内存占用越来越多、性能下降甚至页面崩溃。

在 JavaScript 中的常见情况：

### 1. 闭包引用未释放

```js
function bindEvent(){
    const bigData = new Array(1000000).fill('xxx'); // 占用大量内存
    document.getElementById('btn').onclick = () => {
        console.log(bigData.length);
    }
}
bindEvent();
```

* 即使按钮已经从页面移除，`bigData` 仍然被闭包引用，内存无法释放。

### 2. 未清理的定时器

```js
setInterval(() => {
    console.log('一直运行');
}, 1000);
```

* 如果不 `clearInterval`，函数和里面引用的变量会一直存在。

### 3. 全局变量过度使用

```js
window.cache = new Array(1000000).fill('xxx');
```

* 全局变量不会自动销毁，除非手动删除。

### 4. DOM 引用未清理

```js
const el = document.getElementById("app");
const ref = { el }; // 对 DOM 的引用
document.body.removeChild(el);
// 但 ref 还持有 DOM 的引用，GC 无法回收
```

## 总结

内存泄漏就是不再使用的内存无法被释放。在 JavaScript 里，常见原因有：闭包未释放、定时器未清理、全局变量滥用、DOM 引用未清理等。

比如一个 DOM 被移除了，但闭包里还持有它的引用，就会导致内存泄漏。解决办法是及时解绑时间、清理定时器、避免滥用全局变量，并在合适的时机手动释放引用。































